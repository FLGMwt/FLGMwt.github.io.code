{"meta":{"version":1,"warehouse":"2.2.0"},"models":{"Asset":[{"_id":"themes/clean-blog/source/css/article.styl","path":"css/article.styl","modified":0,"renderable":1},{"_id":"themes/clean-blog/source/css/mixins.styl","path":"css/mixins.styl","modified":0,"renderable":1},{"_id":"themes/clean-blog/source/css/base.styl","path":"css/base.styl","modified":0,"renderable":1},{"_id":"themes/clean-blog/source/css/style.styl","path":"css/style.styl","modified":0,"renderable":1},{"_id":"themes/clean-blog/source/css/variables.styl","path":"css/variables.styl","modified":0,"renderable":1},{"_id":"themes/clean-blog/source/img/about-bg.jpg","path":"img/about-bg.jpg","modified":0,"renderable":1},{"_id":"themes/clean-blog/source/img/home-bg.jpg","path":"img/home-bg.jpg","modified":0,"renderable":1},{"_id":"themes/clean-blog/source/img/contact-bg.jpg","path":"img/contact-bg.jpg","modified":0,"renderable":1}],"Cache":[{"_id":"themes/clean-blog/LICENSE","hash":"34ac5e147727699d1bbc346b014f2e0bdfbb0947","modified":1485639486582},{"_id":"themes/clean-blog/README.md","hash":"4fa53a32f64f081660be607d9ed4f4efa28b3b25","modified":1485639486585},{"_id":"themes/clean-blog/_config.yml","hash":"d61cb6414b9fdd4ca8a6010aaf1e3a8df3413ece","modified":1485670634000},{"_id":"source/_posts/Publishing-NET-Core-NuGet-Packages.md","hash":"c97bb5115e9e1090264b274a33808ab03570e6f8","modified":1485670432000},{"_id":"source/_posts/hello-world.md","hash":"bc5020d87ee01458d1fb9b9eb242829edae5c9f1","modified":1485642635324},{"_id":"themes/clean-blog/.git/COMMIT_EDITMSG","hash":"e1cbe0f1035aadcc248bee414dbb478c0815a0fb","modified":1485670668765},{"_id":"themes/clean-blog/.git/HEAD","hash":"acbaef275e46a7f14c1ef456fff2c8bbe8c84724","modified":1485639486567},{"_id":"themes/clean-blog/.git/config","hash":"d9300cb468606ad97c804c8db814e6851219a52a","modified":1485670679916},{"_id":"themes/clean-blog/.git/description","hash":"9635f1b7e12c045212819dd934d809ef07efa2f4","modified":1485639485537},{"_id":"themes/clean-blog/.git/index","hash":"00cb83b2181d04608b4163d0583ba8c8afbe6158","modified":1485670668762},{"_id":"themes/clean-blog/.git/packed-refs","hash":"6f299e362770d70250edb034cd187c9f3988f689","modified":1485670679914},{"_id":"themes/clean-blog/languages/de.yml","hash":"02a98ba2b93e30a00ae7979fbe90b767a27290f0","modified":1485639486589},{"_id":"themes/clean-blog/languages/default.yml","hash":"3cd0873b310cbf2fe022ee18d55a6113b347ea09","modified":1485639486591},{"_id":"themes/clean-blog/languages/en.yml","hash":"3cd0873b310cbf2fe022ee18d55a6113b347ea09","modified":1485639486591},{"_id":"themes/clean-blog/languages/es.yml","hash":"fb089145368422ac47da9eb00fed05b15c904aa2","modified":1485639486593},{"_id":"themes/clean-blog/languages/fr.yml","hash":"10e3529b8492d7a7601d5b35b44d8fc9e8ea8d1b","modified":1485639486594},{"_id":"themes/clean-blog/languages/no.yml","hash":"5ce3a1043ff85cecf83f3b5b0cdad2df44fa0192","modified":1485639486596},{"_id":"themes/clean-blog/languages/pl.yml","hash":"6dc5d1b2aa75ae4c527089a770f43bafb91d80f4","modified":1485639486597},{"_id":"themes/clean-blog/languages/pt.yml","hash":"6a31d548092af8af9f25d859063b0589c23ce13a","modified":1485639486599},{"_id":"themes/clean-blog/languages/zh-CN.yml","hash":"6d712d9eb6ba12213dcd76b532cd86e9da83cfa3","modified":1485639486603},{"_id":"themes/clean-blog/languages/ru.yml","hash":"2cfaf93704ea4ac3f374c69bab89ca31916faa33","modified":1485639486601},{"_id":"themes/clean-blog/languages/zh-TW.yml","hash":"45c84384a05fdb7e32a3e2d498ea180be7dccfa9","modified":1485639486604},{"_id":"themes/clean-blog/layout/archive.ejs","hash":"3c3eaf652efe697fe6bbbcc66c346a98f94fe363","modified":1485639486670},{"_id":"themes/clean-blog/layout/index.ejs","hash":"7dfdd9347f14b782d305a70f9ddb696ee1bb3864","modified":1485639486674},{"_id":"themes/clean-blog/layout/page.ejs","hash":"38382e9bbeb6b8d2eafbd53fff2984111f524c1a","modified":1485639486680},{"_id":"themes/clean-blog/layout/layout.ejs","hash":"acc791dc4346c135ce4cac3cdeba6f96708115e5","modified":1485639486678},{"_id":"themes/clean-blog/layout/post.ejs","hash":"38382e9bbeb6b8d2eafbd53fff2984111f524c1a","modified":1485639486680},{"_id":"themes/clean-blog/.git/hooks/applypatch-msg.sample","hash":"4de88eb95a5e93fd27e78b5fb3b5231a8d8917dd","modified":1485639485539},{"_id":"themes/clean-blog/.git/hooks/post-update.sample","hash":"b614c2f63da7dca9f1db2e7ade61ef30448fc96c","modified":1485639485542},{"_id":"themes/clean-blog/.git/hooks/commit-msg.sample","hash":"ee1ed5aad98a435f2020b6de35c173b75d9affac","modified":1485639485541},{"_id":"themes/clean-blog/.git/hooks/pre-push.sample","hash":"5c8518bfd1d1d3d2c1a7194994c0a16d8a313a41","modified":1485639485548},{"_id":"themes/clean-blog/.git/hooks/pre-commit.sample","hash":"36aed8976dcc08b5076844f0ec645b18bc37758f","modified":1485639485546},{"_id":"themes/clean-blog/.git/hooks/pre-rebase.sample","hash":"5885a56ab4fca8075a05a562d005e922cde9853b","modified":1485639485552},{"_id":"themes/clean-blog/.git/hooks/update.sample","hash":"e729cd61b27c128951d139de8e7c63d1a3758dde","modified":1485639485557},{"_id":"themes/clean-blog/.git/hooks/prepare-commit-msg.sample","hash":"2b6275eda365cad50d167fe3a387c9bc9fedd54f","modified":1485639485554},{"_id":"themes/clean-blog/.git/hooks/pre-applypatch.sample","hash":"f208287c1a92525de9f5462e905a9d31de1e2d75","modified":1485639485544},{"_id":"themes/clean-blog/.git/info/exclude","hash":"c879df015d97615050afa7b9641e3352a1e701ac","modified":1485639485559},{"_id":"themes/clean-blog/.git/logs/HEAD","hash":"bf4d6b636642919bea7f2ea71d903ba8a907a1ec","modified":1485670668771},{"_id":"themes/clean-blog/source/css/article.styl","hash":"768418ecaa2ff17f6fa81d72096627e05579fe93","modified":1485639486682},{"_id":"themes/clean-blog/source/css/mixins.styl","hash":"cf700a1c1c62b17d35a8f7500bf1a32d9bc6ab6a","modified":1485639486685},{"_id":"themes/clean-blog/source/css/base.styl","hash":"137ed814411f5964191429743000a900e87c4ef6","modified":1485642632000},{"_id":"themes/clean-blog/source/css/style.styl","hash":"7200d572751c1f5888b3d0df25bf503a3f31ca2d","modified":1485639486687},{"_id":"themes/clean-blog/source/css/variables.styl","hash":"06e16f64020cbddf2c2c49ef45f940141a1b2ada","modified":1485639486688},{"_id":"themes/clean-blog/layout/_partial/after-footer.ejs","hash":"f199b6e0039a7e9f840b8fbb9971fbd673ba5ce3","modified":1485639486609},{"_id":"themes/clean-blog/source/img/about-bg.jpg","hash":"d39126a6456f2bac0169d1779304725f179c9900","modified":1485639486691},{"_id":"themes/clean-blog/layout/_partial/article-archive.ejs","hash":"75b9b24c226eda4884752a868177b590d3e8b06f","modified":1485639486613},{"_id":"themes/clean-blog/layout/_partial/article-index.ejs","hash":"ad112adf312337c60d436fdd127e948fe81b3dd1","modified":1485639486635},{"_id":"themes/clean-blog/layout/_partial/article-categories.ejs","hash":"b494e4a50f63d66e545da449af18a7198a057bd6","modified":1485639486616},{"_id":"themes/clean-blog/layout/_partial/article-full.ejs","hash":"12b8388ca3c729104225e44f247246501c925c14","modified":1485639486630},{"_id":"themes/clean-blog/layout/_partial/article-tags.ejs","hash":"12524df0c1ce5136a8f88cea2fe550f9e1b47b19","modified":1485639486638},{"_id":"themes/clean-blog/layout/_partial/comments.ejs","hash":"5cafed11b6cfbf22e83674676c0edc6c4420cc0d","modified":1485639486645},{"_id":"themes/clean-blog/layout/_partial/google-analytics.ejs","hash":"b287b7f66a53b51c7cd872ad1b15dfd20fb3e35d","modified":1485639486653},{"_id":"themes/clean-blog/layout/_partial/gallery.ejs","hash":"15e9562d0f6146e25e22856693d1312cd3ade4af","modified":1485639486650},{"_id":"themes/clean-blog/layout/_partial/footer.ejs","hash":"c2315e0d51296b5ab3746a100530d083274da2b6","modified":1485639632000},{"_id":"themes/clean-blog/layout/_partial/head.ejs","hash":"09a38335f50ef6b108ec7b2ce0f54b4289e183c9","modified":1485639486660},{"_id":"themes/clean-blog/layout/_partial/pagination.ejs","hash":"cd61e4dbbf6020ad094c8e66ec06e8c38ebcd122","modified":1485639486665},{"_id":"themes/clean-blog/layout/_partial/menu.ejs","hash":"3c51a2a2f950ab2ca80f10d3d3941d5d8cd08ec7","modified":1485639486664},{"_id":"themes/clean-blog/.git/objects/02/25097bda72228fb8eab444bfe2218473905af0","hash":"831054cdd6c2bda7ffdec8296bb7627d2fe8097e","modified":1485648115391},{"_id":"themes/clean-blog/.git/objects/28/7a1fbfd69ab79e67d18cdcba62db53cccfd44b","hash":"457cc53ff406acb7c38a9af3138a5e63a1292aae","modified":1485648115385},{"_id":"themes/clean-blog/.git/objects/76/530320615e8211a1397224da900e0f8fb32dd9","hash":"90eeaa2b5a28666bd1393705517e4a46e08bba6d","modified":1485648115379},{"_id":"themes/clean-blog/.git/objects/64/f3e6f300d953a017f3529e7407c8320e29de1c","hash":"6878dd4bc2599155e223de490ce08fe976a00de7","modified":1485648115374},{"_id":"themes/clean-blog/.git/objects/5f/d6e2c84407160bab5864ccf0db9ed8f100f220","hash":"826eb5d183d474938c47ecd5bc1d7b0512aafd5d","modified":1485648100218},{"_id":"themes/clean-blog/.git/objects/6c/4bf9ce2670ec21be5a6fe963c11f7569877b3a","hash":"d082541f1eacb114d585f103c144e56c44f2defd","modified":1485648100216},{"_id":"themes/clean-blog/.git/objects/d2/c9996eaacb39724e7ef9c4d81a771d927d9d2f","hash":"71795a247f24392c922356b16fefc3c5b981c9d4","modified":1485648115376},{"_id":"themes/clean-blog/.git/objects/97/4f1754cbe6368e9e656bc1f79585e283324cfb","hash":"7ca8edf0d41c1c1281f4141e8df4587bec34e92e","modified":1485648115382},{"_id":"themes/clean-blog/.git/objects/c7/a1af4bd2cf7be17e6af8a305c5356dc162e393","hash":"7282cd3902dc2cc443af8d31987ad9a266be9007","modified":1485648100213},{"_id":"themes/clean-blog/.git/objects/pack/pack-150961354dcaf41617990f9a9d18fb969ec0b9fb.idx","hash":"32e5daf443ca079417d364b3ef3a4144baae432b","modified":1485639486533},{"_id":"themes/clean-blog/.git/refs/heads/master","hash":"fbce7cc8ecfd23b23673f40d877ae4b5acfa6121","modified":1485670668769},{"_id":"themes/clean-blog/source/img/home-bg.jpg","hash":"990f6f9dd0ecb5348bfcc47305553d58c0d8f326","modified":1485639486697},{"_id":"themes/clean-blog/.git/logs/refs/heads/master","hash":"bf4d6b636642919bea7f2ea71d903ba8a907a1ec","modified":1485670668770},{"_id":"themes/clean-blog/.git/refs/remotes/origin/HEAD","hash":"d9427cda09aba1cdde5c69c2b13c905bddb0bc51","modified":1485639486566},{"_id":"themes/clean-blog/source/img/contact-bg.jpg","hash":"6af63305c923899017e727b5ca968a2703bc08cf","modified":1485639486694},{"_id":"themes/clean-blog/.git/logs/refs/remotes/origin/HEAD","hash":"c46da546ff6f529100694dc3c16533e08e4a011d","modified":1485639486565},{"_id":"themes/clean-blog/.git/objects/pack/pack-150961354dcaf41617990f9a9d18fb969ec0b9fb.pack","hash":"4cc90aed47a7c34d707952de5396981e230bfff1","modified":1485639486538},{"_id":"public/2017/01/28/Publishing-NET-Core-NuGet-Packages/index.html","hash":"1ff9d88aa972ff2846774c033379ef37bd7c7c9d","modified":1485670731901},{"_id":"public/2017/01/28/hello-world/index.html","hash":"06648063aea4e2b16c07cb6f6c4d5346a11a2145","modified":1485652425488},{"_id":"public/index.html","hash":"f3371e8848fe3a13d82400ebdf812a537bd14487","modified":1485670731900},{"_id":"public/archives/index.html","hash":"0ff6e2c489a9e721ffd72570d166166f1d82ca41","modified":1485670731900},{"_id":"public/archives/2017/index.html","hash":"76d7ddae4cbf07cdf9a09de53e8642b141216493","modified":1485670731900},{"_id":"public/archives/2017/01/index.html","hash":"551ba2c94e46f4d0c4b6d6d1d9cf8498b7af3187","modified":1485670731901},{"_id":"public/tags/csharp-dotnet-dotnetcore-nuget/index.html","hash":"5dc29f32c2a2347e2f2a929c484b4960e75d8b88","modified":1485670731901},{"_id":"public/img/about-bg.jpg","hash":"d39126a6456f2bac0169d1779304725f179c9900","modified":1485652425490},{"_id":"public/css/article.css","hash":"f0ee490e1207191946fffc9444f891e9b7ae7289","modified":1485652425799},{"_id":"public/css/mixins.css","hash":"45146e7f4346351cd7f364de344aecf9574475f9","modified":1485652425799},{"_id":"public/css/base.css","hash":"b0f0aa208c64ee0a270ff47fee10067202e35655","modified":1485652425799},{"_id":"public/css/style.css","hash":"d90e1282944ea42df8b6759f8f308bfdbf5e8d49","modified":1485652425799},{"_id":"public/css/variables.css","hash":"da39a3ee5e6b4b0d3255bfef95601890afd80709","modified":1485652425799},{"_id":"public/img/home-bg.jpg","hash":"990f6f9dd0ecb5348bfcc47305553d58c0d8f326","modified":1485652425799},{"_id":"public/img/contact-bg.jpg","hash":"6af63305c923899017e727b5ca968a2703bc08cf","modified":1485652425803},{"_id":"themes/clean-blog/.git/objects/61/314314c80037ace82ffad454d7f0105b2c4119","hash":"21e757394b17465423a99360b7debbd3a55a4f34","modified":1485670668767},{"_id":"themes/clean-blog/.git/objects/79/fcd4a26f52e74ffdcbfd7f05f371acf076ad35","hash":"149bfdc5bea0efc5ac35ce0966fb8eea9f45c3f1","modified":1485670668758},{"_id":"themes/clean-blog/.git/objects/79/e102e9c5a0ee846a5e1280ceb57079b160e7ca","hash":"7833ebc41f29d09c12752749d1e6839923572ea9","modified":1485670668760}],"Category":[],"Data":[],"Page":[],"Post":[{"title":"Publishing .NET Core NuGet Packages","date":"2017-01-28T21:32:36.000Z","_content":"\n##### *NOTE: This post is only getting written because I couldn't find a reliable and up to date guide for creating public NuGet packages for the current state of .NET Core tooling. I'll do my best to either update this or delete it when it becomes irrelevant in order to prevent the confusion that made this a little difficult for me.*\n\nSo you've got some code you think would be helpful to your community. Or maybe you just want to save yourself the hassle of managing bits of code that you frequently use in your projects.\n\nThankfully, you have available to you the same mechanism that all your favorite dependencies use to distribute and retrieve packages: **NuGet**.\n\n## About NuGet\n\nNuGet is a package manager which is used for various things such as [Windows software](https://chocolatey.org/) and [deployment packaging](https://octopus.com/), but is primarily used by .NET developers for packaging and managing code libraries.\n\nDevelopers have the ability to turn their software (typically class libraries) into NuGet packages (`*.nupkg`), publish those packages to a NuGet repository (https://www.nuget.org/ or their own private repositories), and have other developers reference the packages in their own projects.\n\nWith the recent changes to the .NET tooling and build infrastructure, there's been a lack of clarity about what this process is going to look like going forward. Since I recently decided to publish a package, I'll share the steps I took to create a package on nuget.org with the latest tools (specifically, `1.0.0-rc4-004706` and later).\n\n## What you'll need\n\n- [A nuget.org account](https://www.nuget.org/users/account/LogOn)\n- [The NuGet Command Line Tools](https://docs.microsoft.com/en-us/nuget/guides/install-nuget#nuget-cli)\n- [.NET Core SDK & CLI tools](https://github.com/dotnet/cli/#installers-and-binaries)\n\nIt's pretty important following along that you have this exact version of the tools. These are changing *very* quickly and this guide may not be entirely correct or relevant for other versions.\n\nIf your version is lower than the following, try reinstalling the dotnet tools from the site above.\n\n``` PowerShell\ndotnet --version\n1.0.0-rc4-004706\n```\n\n## Creating a Class Library\n\nYou can create NuGet packages out of your existing class libraries, but for this guide, I'll be starting from scratch with a new project, using the `dotnet` cli:\n\n``` PowerShell\nmkdir MyFancyPackage\ncd MyFancyPackage\ndotnet new -t Lib # creates a new .NET project using the Class Library template\n```\n\nYou should now have a `Class1.cs` and `MyFancyPackage.csproj`. That's right, a `csproj`. You may have heard of or fiddled with .NET Core in the past and been exposed to files such as `project.json` and `*.xproj`, but the path forward for .NET is `csproj` files and MSBuild.\n\nDon't fret though! This isn't the `csproj` you're used to/annoyed with/cripplingly terrified of. Here's what a basic class library looks like:\n\n``` xml\n<Project Sdk=\"Microsoft.NET.Sdk\">\n  <PropertyGroup>\n    <TargetFramework>netstandard1.4</TargetFramework>\n  </PropertyGroup>\n</Project>\n```\n\nSome things to note:\n\n- 5 lines instead of the 47 lines from a VS 2015 Class Library template\n- No build tools versions\n- No build targets paths\n- No build configurations\n- No file includes\n- No external references\n\nThe .NET Core tooling team has brought together familiar parts from the `csproj` xml you know and love, melded with the readability and convention-over-configuration tendencies of the popular `project.json`.\n\nHow does `Class1.cs` make its way into the compiled project, you ask? Projects using the .NET Core SDK have an implicit **opt-out** strategy for project files. This means that, by default, everything in the project directory is included in the build. This *also* probably means, at least for me, less CI build failures because I added or renamed a file, but forgot to Save All in VS before committing (blasted `csproj` changes!).\n\nAlso of note, the [NETStandard.Library](https://www.nuget.org/packages/NETStandard.Library/) NuGet package is implicitly included. This package can roughly be considered the alternative to the `dll`s that make up the .NET Framework SDK install.\n\n## Building the Starter Class Library\n\nBuilding our newly generated project is as straightforward as running:\n\n``` PowerShell\ndotnet build\n```\n\nThis builds our project in the defaut configuration (`Debug`), and you should have a `.dll` in `bin/Debug/netstandard1.4/`.\n\n## NuGet Project Properties\n\nPreviously, NuGet configuration was done with a separate `.nuspec` file which allowed setting package name, owner, version, and the like. With the recent releases of .NET Core SDK, that is consolidated as well into the project `.csproj`.\n\nEdit your `csproj` to read as follows (replacing the `{}` blocks with your own info):\n\n``` xml\n<Project Sdk=\"Microsoft.NET.Sdk\">\n  <PropertyGroup>\n    <TargetFramework>netstandard1.4</TargetFramework>\n    <Version>0.0.1</Version>\n    <AssemblyName>{YourGitHubHandle}.MyFancyPackage</AssemblyName>\n    <PackageId>{YourGitHubHandle}.MyFancyPackage</PackageId>\n    <Description>Sample package for .NET Core NuGets</Description>\n    <Authors>{yourName}</Authors>\n    <PackageProjectUrl>{yourGithubRepoUrl}</PackageProjectUrl>\n    <PackageTags>sample dotnetcore nuget dotnetstandard</PackageTags>\n  </PropertyGroup>\n</Project>\n```\n\nThese properties in the `csproj` set the metadata which will be associated with your packagage when it is published to nuget.org. I suggest using your GitHub handle so that you don't have to worry about package collision.\n\n## Creating the NuGet Package\n\nBefore the .NET Core SDK, the `nuget` command line tool was used for both creating and publishing packages. Because NuGet is becoming more integrated with the .NET Core workflow, we'll use the `dotnet` cli tool to build and bundle our package.\n\nRun the following in the project root:\n\n``` PowerShell\ndotnet pack -c Release\n```\n\nNotice that it created a package using the `AssemblyName` and version information you supplied in the `csproj`. The `-c` or `--configuration` flag sets your build configuration. This also prescribes the output folder (`bin/Release` in this case).\n\n## Publishing Your Package\n\nRemember creating that nuget.org account? Well take a look at your [account page](https://www.nuget.org/account). At the bottom of the page, you'll see an \"API Key\" section. This API key is used to identify you as a package publisher and is required to create and manage your packages.\n\nLet's try publishing your package now (substituing your own handle and API key):\n\n``` PowerShell\nnuget push bin/Release/<YOUR_HANDLE>.MyFancyPackage.0.0.1.nupkg <API_KEY> -Source https://www.nuget.org/api/v2/package\n```\n\nYou should get a success message, and if you navigate back to your nuget.org account page and click \"Manage My Packages\", you'll see your new public package! Congratulations!\n\nRight after you publish your package, you'll see a message that says \"This package has not been indexed yet.\" This means that your package won't show up in search or be available to install just yet. For me, this only took about five minutes, but may be quicker or slower. Once this disappears though, you should be able to pull in your new package to any project you like!\n\n# Testing Your New Package\n\nSure, we've put up some bytes on nuget.org, but do they work? We can build a small consuming app to try it out.\n\n## Modifying the Library\n\nLet's make the package a little more interesting so we can prove that we're using the new package.\n\nModify `Class1.cs` to read as follows:\n\n``` cs\nnamespace MyFancyPackage\n{\n    public static class Class1\n    {\n        public static readonly string Message = \"Hello world, from nupkg!\";\n    }\n}\n```\n\nNow we'll build and publish it again to reflect our changes:\n\n``` PowerShell\ndotnet pack -c Release\nnuget push bin/Release/<YOUR_HANDLE>.MyFancyPackage.0.0.1.nupkg <API_KEY> -Source https://www.nuget.org/api/v2/package\n```\n\nUh oh, looks like that failed. That's because we already published a 0.0.1 version of our package and nuget.org does not allow modifying or deleting packages once they're published. You wouldn't want a dependency to break from under you, [would you](http://www.haneycodes.net/npm-left-pad-have-we-forgotten-how-to-program/)?\n\nWe'll need to bump our version back in the `csproj`:\n\n``` xml\n...\n<Version>0.0.2</Version>\n...\n```\n\nAnd try again:\n\n``` PowerShell\ndotnet pack -c Release\nnuget push bin/Release/<YOUR_HANDLE>.MyFancyPackage.0.0.1.nupkg <API_KEY> -Source https://www.nuget.org/api/v2/package\n```\n\nAll better! While that's indexing, let's get our testing project up and running.\n\n## Test Project\n\nSince our test project is going to have a `csproj` of its own, we'll want it in a different directory. Let's pop out and create it:\n\n``` PowerShell\ncd ..\nmkdir MyConsumingApp\ncd MyConsumingApp\ndotnet new\n```\n\nThis time, we used the default project template which is a console app. Let's give it a trial run:\n\n``` PowerShell\ndotnet restore\ndotnet run\n-> Hello world!\n```\n\nNice! By now, our package should be ready, so let's pop open `MyConsumingApp.csproj` and add a reference to the package:\n\n``` xml\n<Project Sdk=\"Microsoft.NET.Sdk\">\n  <PropertyGroup>\n    <OutputType>Exe</OutputType>\n    <TargetFramework>netcoreapp1.0</TargetFramework>\n  </PropertyGroup>\n  <ItemGroup>\n    <PackageReference Include=\"{YourGitHubHandle}.MyFancyPackage\" Version=\"0.0.2\" />\n  </ItemGroup>\n</Project>\n```\n\nWe've added something new: a `PackageReference`. These are the types of things you would have seen in traditional `packages.config` files or even in the more recent `project.json`. Once you add a project reference and run `dotnet restore`, you'll be able to use the third party code you depend on. Let's do that now:\n\n``` PowerShell\ndotnet restore\n```\n\nEverything should be in place. Now we can start using our package! Change `Program.cs` to look like this:\n\n``` cs\nusing System;\nusing {YourGitHubHandle}.MyFancyPackage;\n\nnamespace ConsoleApp\n{\n    class Program\n    {\n        static void Main(string[] args)\n        {\n            Console.WriteLine(Class1.Message);\n        }\n    }\n}\n```\n\nMoment of truth! Let's run it.\n\n``` PowerShell\ndotnet run\n-> Hello world, from nupkg!\n```\n\nWell done! You're a published (NuGet) author!\n\nIf you have any questions about these steps, hit me up at [https://twitter.com/ryanastelly](@ryanastelly) and I'll do my best to help out. Cheers!","source":"_posts/Publishing-NET-Core-NuGet-Packages.md","raw":"---\ntitle: Publishing .NET Core NuGet Packages\ndate: 2017-01-28 15:32:36\ntags: csharp dotnet dotnetcore nuget\n---\n\n##### *NOTE: This post is only getting written because I couldn't find a reliable and up to date guide for creating public NuGet packages for the current state of .NET Core tooling. I'll do my best to either update this or delete it when it becomes irrelevant in order to prevent the confusion that made this a little difficult for me.*\n\nSo you've got some code you think would be helpful to your community. Or maybe you just want to save yourself the hassle of managing bits of code that you frequently use in your projects.\n\nThankfully, you have available to you the same mechanism that all your favorite dependencies use to distribute and retrieve packages: **NuGet**.\n\n## About NuGet\n\nNuGet is a package manager which is used for various things such as [Windows software](https://chocolatey.org/) and [deployment packaging](https://octopus.com/), but is primarily used by .NET developers for packaging and managing code libraries.\n\nDevelopers have the ability to turn their software (typically class libraries) into NuGet packages (`*.nupkg`), publish those packages to a NuGet repository (https://www.nuget.org/ or their own private repositories), and have other developers reference the packages in their own projects.\n\nWith the recent changes to the .NET tooling and build infrastructure, there's been a lack of clarity about what this process is going to look like going forward. Since I recently decided to publish a package, I'll share the steps I took to create a package on nuget.org with the latest tools (specifically, `1.0.0-rc4-004706` and later).\n\n## What you'll need\n\n- [A nuget.org account](https://www.nuget.org/users/account/LogOn)\n- [The NuGet Command Line Tools](https://docs.microsoft.com/en-us/nuget/guides/install-nuget#nuget-cli)\n- [.NET Core SDK & CLI tools](https://github.com/dotnet/cli/#installers-and-binaries)\n\nIt's pretty important following along that you have this exact version of the tools. These are changing *very* quickly and this guide may not be entirely correct or relevant for other versions.\n\nIf your version is lower than the following, try reinstalling the dotnet tools from the site above.\n\n``` PowerShell\ndotnet --version\n1.0.0-rc4-004706\n```\n\n## Creating a Class Library\n\nYou can create NuGet packages out of your existing class libraries, but for this guide, I'll be starting from scratch with a new project, using the `dotnet` cli:\n\n``` PowerShell\nmkdir MyFancyPackage\ncd MyFancyPackage\ndotnet new -t Lib # creates a new .NET project using the Class Library template\n```\n\nYou should now have a `Class1.cs` and `MyFancyPackage.csproj`. That's right, a `csproj`. You may have heard of or fiddled with .NET Core in the past and been exposed to files such as `project.json` and `*.xproj`, but the path forward for .NET is `csproj` files and MSBuild.\n\nDon't fret though! This isn't the `csproj` you're used to/annoyed with/cripplingly terrified of. Here's what a basic class library looks like:\n\n``` xml\n<Project Sdk=\"Microsoft.NET.Sdk\">\n  <PropertyGroup>\n    <TargetFramework>netstandard1.4</TargetFramework>\n  </PropertyGroup>\n</Project>\n```\n\nSome things to note:\n\n- 5 lines instead of the 47 lines from a VS 2015 Class Library template\n- No build tools versions\n- No build targets paths\n- No build configurations\n- No file includes\n- No external references\n\nThe .NET Core tooling team has brought together familiar parts from the `csproj` xml you know and love, melded with the readability and convention-over-configuration tendencies of the popular `project.json`.\n\nHow does `Class1.cs` make its way into the compiled project, you ask? Projects using the .NET Core SDK have an implicit **opt-out** strategy for project files. This means that, by default, everything in the project directory is included in the build. This *also* probably means, at least for me, less CI build failures because I added or renamed a file, but forgot to Save All in VS before committing (blasted `csproj` changes!).\n\nAlso of note, the [NETStandard.Library](https://www.nuget.org/packages/NETStandard.Library/) NuGet package is implicitly included. This package can roughly be considered the alternative to the `dll`s that make up the .NET Framework SDK install.\n\n## Building the Starter Class Library\n\nBuilding our newly generated project is as straightforward as running:\n\n``` PowerShell\ndotnet build\n```\n\nThis builds our project in the defaut configuration (`Debug`), and you should have a `.dll` in `bin/Debug/netstandard1.4/`.\n\n## NuGet Project Properties\n\nPreviously, NuGet configuration was done with a separate `.nuspec` file which allowed setting package name, owner, version, and the like. With the recent releases of .NET Core SDK, that is consolidated as well into the project `.csproj`.\n\nEdit your `csproj` to read as follows (replacing the `{}` blocks with your own info):\n\n``` xml\n<Project Sdk=\"Microsoft.NET.Sdk\">\n  <PropertyGroup>\n    <TargetFramework>netstandard1.4</TargetFramework>\n    <Version>0.0.1</Version>\n    <AssemblyName>{YourGitHubHandle}.MyFancyPackage</AssemblyName>\n    <PackageId>{YourGitHubHandle}.MyFancyPackage</PackageId>\n    <Description>Sample package for .NET Core NuGets</Description>\n    <Authors>{yourName}</Authors>\n    <PackageProjectUrl>{yourGithubRepoUrl}</PackageProjectUrl>\n    <PackageTags>sample dotnetcore nuget dotnetstandard</PackageTags>\n  </PropertyGroup>\n</Project>\n```\n\nThese properties in the `csproj` set the metadata which will be associated with your packagage when it is published to nuget.org. I suggest using your GitHub handle so that you don't have to worry about package collision.\n\n## Creating the NuGet Package\n\nBefore the .NET Core SDK, the `nuget` command line tool was used for both creating and publishing packages. Because NuGet is becoming more integrated with the .NET Core workflow, we'll use the `dotnet` cli tool to build and bundle our package.\n\nRun the following in the project root:\n\n``` PowerShell\ndotnet pack -c Release\n```\n\nNotice that it created a package using the `AssemblyName` and version information you supplied in the `csproj`. The `-c` or `--configuration` flag sets your build configuration. This also prescribes the output folder (`bin/Release` in this case).\n\n## Publishing Your Package\n\nRemember creating that nuget.org account? Well take a look at your [account page](https://www.nuget.org/account). At the bottom of the page, you'll see an \"API Key\" section. This API key is used to identify you as a package publisher and is required to create and manage your packages.\n\nLet's try publishing your package now (substituing your own handle and API key):\n\n``` PowerShell\nnuget push bin/Release/<YOUR_HANDLE>.MyFancyPackage.0.0.1.nupkg <API_KEY> -Source https://www.nuget.org/api/v2/package\n```\n\nYou should get a success message, and if you navigate back to your nuget.org account page and click \"Manage My Packages\", you'll see your new public package! Congratulations!\n\nRight after you publish your package, you'll see a message that says \"This package has not been indexed yet.\" This means that your package won't show up in search or be available to install just yet. For me, this only took about five minutes, but may be quicker or slower. Once this disappears though, you should be able to pull in your new package to any project you like!\n\n# Testing Your New Package\n\nSure, we've put up some bytes on nuget.org, but do they work? We can build a small consuming app to try it out.\n\n## Modifying the Library\n\nLet's make the package a little more interesting so we can prove that we're using the new package.\n\nModify `Class1.cs` to read as follows:\n\n``` cs\nnamespace MyFancyPackage\n{\n    public static class Class1\n    {\n        public static readonly string Message = \"Hello world, from nupkg!\";\n    }\n}\n```\n\nNow we'll build and publish it again to reflect our changes:\n\n``` PowerShell\ndotnet pack -c Release\nnuget push bin/Release/<YOUR_HANDLE>.MyFancyPackage.0.0.1.nupkg <API_KEY> -Source https://www.nuget.org/api/v2/package\n```\n\nUh oh, looks like that failed. That's because we already published a 0.0.1 version of our package and nuget.org does not allow modifying or deleting packages once they're published. You wouldn't want a dependency to break from under you, [would you](http://www.haneycodes.net/npm-left-pad-have-we-forgotten-how-to-program/)?\n\nWe'll need to bump our version back in the `csproj`:\n\n``` xml\n...\n<Version>0.0.2</Version>\n...\n```\n\nAnd try again:\n\n``` PowerShell\ndotnet pack -c Release\nnuget push bin/Release/<YOUR_HANDLE>.MyFancyPackage.0.0.1.nupkg <API_KEY> -Source https://www.nuget.org/api/v2/package\n```\n\nAll better! While that's indexing, let's get our testing project up and running.\n\n## Test Project\n\nSince our test project is going to have a `csproj` of its own, we'll want it in a different directory. Let's pop out and create it:\n\n``` PowerShell\ncd ..\nmkdir MyConsumingApp\ncd MyConsumingApp\ndotnet new\n```\n\nThis time, we used the default project template which is a console app. Let's give it a trial run:\n\n``` PowerShell\ndotnet restore\ndotnet run\n-> Hello world!\n```\n\nNice! By now, our package should be ready, so let's pop open `MyConsumingApp.csproj` and add a reference to the package:\n\n``` xml\n<Project Sdk=\"Microsoft.NET.Sdk\">\n  <PropertyGroup>\n    <OutputType>Exe</OutputType>\n    <TargetFramework>netcoreapp1.0</TargetFramework>\n  </PropertyGroup>\n  <ItemGroup>\n    <PackageReference Include=\"{YourGitHubHandle}.MyFancyPackage\" Version=\"0.0.2\" />\n  </ItemGroup>\n</Project>\n```\n\nWe've added something new: a `PackageReference`. These are the types of things you would have seen in traditional `packages.config` files or even in the more recent `project.json`. Once you add a project reference and run `dotnet restore`, you'll be able to use the third party code you depend on. Let's do that now:\n\n``` PowerShell\ndotnet restore\n```\n\nEverything should be in place. Now we can start using our package! Change `Program.cs` to look like this:\n\n``` cs\nusing System;\nusing {YourGitHubHandle}.MyFancyPackage;\n\nnamespace ConsoleApp\n{\n    class Program\n    {\n        static void Main(string[] args)\n        {\n            Console.WriteLine(Class1.Message);\n        }\n    }\n}\n```\n\nMoment of truth! Let's run it.\n\n``` PowerShell\ndotnet run\n-> Hello world, from nupkg!\n```\n\nWell done! You're a published (NuGet) author!\n\nIf you have any questions about these steps, hit me up at [https://twitter.com/ryanastelly](@ryanastelly) and I'll do my best to help out. Cheers!","slug":"Publishing-NET-Core-NuGet-Packages","published":1,"updated":"2017-01-29T06:13:52.000Z","_id":"ciyhz3fxo0001s8wb0lqg9eee","comments":1,"layout":"post","photos":[],"link":"","content":"<h5 id=\"NOTE-This-post-is-only-getting-written-because-I-couldn’t-find-a-reliable-and-up-to-date-guide-for-creating-public-NuGet-packages-for-the-current-state-of-NET-Core-tooling-I’ll-do-my-best-to-either-update-this-or-delete-it-when-it-becomes-irrelevant-in-order-to-prevent-the-confusion-that-made-this-a-little-difficult-for-me\"><a href=\"#NOTE-This-post-is-only-getting-written-because-I-couldn’t-find-a-reliable-and-up-to-date-guide-for-creating-public-NuGet-packages-for-the-current-state-of-NET-Core-tooling-I’ll-do-my-best-to-either-update-this-or-delete-it-when-it-becomes-irrelevant-in-order-to-prevent-the-confusion-that-made-this-a-little-difficult-for-me\" class=\"headerlink\" title=\"NOTE: This post is only getting written because I couldn’t find a reliable and up to date guide for creating public NuGet packages for the current state of .NET Core tooling. I’ll do my best to either update this or delete it when it becomes irrelevant in order to prevent the confusion that made this a little difficult for me.\"></a><em>NOTE: This post is only getting written because I couldn’t find a reliable and up to date guide for creating public NuGet packages for the current state of .NET Core tooling. I’ll do my best to either update this or delete it when it becomes irrelevant in order to prevent the confusion that made this a little difficult for me.</em></h5><p>So you’ve got some code you think would be helpful to your community. Or maybe you just want to save yourself the hassle of managing bits of code that you frequently use in your projects.</p>\n<p>Thankfully, you have available to you the same mechanism that all your favorite dependencies use to distribute and retrieve packages: <strong>NuGet</strong>.</p>\n<h2 id=\"About-NuGet\"><a href=\"#About-NuGet\" class=\"headerlink\" title=\"About NuGet\"></a>About NuGet</h2><p>NuGet is a package manager which is used for various things such as <a href=\"https://chocolatey.org/\" target=\"_blank\" rel=\"external\">Windows software</a> and <a href=\"https://octopus.com/\" target=\"_blank\" rel=\"external\">deployment packaging</a>, but is primarily used by .NET developers for packaging and managing code libraries.</p>\n<p>Developers have the ability to turn their software (typically class libraries) into NuGet packages (<code>*.nupkg</code>), publish those packages to a NuGet repository (<a href=\"https://www.nuget.org/\" target=\"_blank\" rel=\"external\">https://www.nuget.org/</a> or their own private repositories), and have other developers reference the packages in their own projects.</p>\n<p>With the recent changes to the .NET tooling and build infrastructure, there’s been a lack of clarity about what this process is going to look like going forward. Since I recently decided to publish a package, I’ll share the steps I took to create a package on nuget.org with the latest tools (specifically, <code>1.0.0-rc4-004706</code> and later).</p>\n<h2 id=\"What-you’ll-need\"><a href=\"#What-you’ll-need\" class=\"headerlink\" title=\"What you’ll need\"></a>What you’ll need</h2><ul>\n<li><a href=\"https://www.nuget.org/users/account/LogOn\" target=\"_blank\" rel=\"external\">A nuget.org account</a></li>\n<li><a href=\"https://docs.microsoft.com/en-us/nuget/guides/install-nuget#nuget-cli\" target=\"_blank\" rel=\"external\">The NuGet Command Line Tools</a></li>\n<li><a href=\"https://github.com/dotnet/cli/#installers-and-binaries\" target=\"_blank\" rel=\"external\">.NET Core SDK &amp; CLI tools</a></li>\n</ul>\n<p>It’s pretty important following along that you have this exact version of the tools. These are changing <em>very</em> quickly and this guide may not be entirely correct or relevant for other versions.</p>\n<p>If your version is lower than the following, try reinstalling the dotnet tools from the site above.</p>\n<figure class=\"highlight powershell\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div></pre></td><td class=\"code\"><pre><div class=\"line\">dotnet --version</div><div class=\"line\"><span class=\"number\">1.0</span>.<span class=\"number\">0</span>-rc4-<span class=\"number\">004706</span></div></pre></td></tr></table></figure>\n<h2 id=\"Creating-a-Class-Library\"><a href=\"#Creating-a-Class-Library\" class=\"headerlink\" title=\"Creating a Class Library\"></a>Creating a Class Library</h2><p>You can create NuGet packages out of your existing class libraries, but for this guide, I’ll be starting from scratch with a new project, using the <code>dotnet</code> cli:</p>\n<figure class=\"highlight powershell\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div></pre></td><td class=\"code\"><pre><div class=\"line\">mkdir MyFancyPackage</div><div class=\"line\">cd MyFancyPackage</div><div class=\"line\">dotnet new -t Lib <span class=\"comment\"># creates a new .NET project using the Class Library template</span></div></pre></td></tr></table></figure>\n<p>You should now have a <code>Class1.cs</code> and <code>MyFancyPackage.csproj</code>. That’s right, a <code>csproj</code>. You may have heard of or fiddled with .NET Core in the past and been exposed to files such as <code>project.json</code> and <code>*.xproj</code>, but the path forward for .NET is <code>csproj</code> files and MSBuild.</p>\n<p>Don’t fret though! This isn’t the <code>csproj</code> you’re used to/annoyed with/cripplingly terrified of. Here’s what a basic class library looks like:</p>\n<figure class=\"highlight xml\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">Project</span> <span class=\"attr\">Sdk</span>=<span class=\"string\">\"Microsoft.NET.Sdk\"</span>&gt;</span></div><div class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">PropertyGroup</span>&gt;</span></div><div class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">TargetFramework</span>&gt;</span>netstandard1.4<span class=\"tag\">&lt;/<span class=\"name\">TargetFramework</span>&gt;</span></div><div class=\"line\">  <span class=\"tag\">&lt;/<span class=\"name\">PropertyGroup</span>&gt;</span></div><div class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">Project</span>&gt;</span></div></pre></td></tr></table></figure>\n<p>Some things to note:</p>\n<ul>\n<li>5 lines instead of the 47 lines from a VS 2015 Class Library template</li>\n<li>No build tools versions</li>\n<li>No build targets paths</li>\n<li>No build configurations</li>\n<li>No file includes</li>\n<li>No external references</li>\n</ul>\n<p>The .NET Core tooling team has brought together familiar parts from the <code>csproj</code> xml you know and love, melded with the readability and convention-over-configuration tendencies of the popular <code>project.json</code>.</p>\n<p>How does <code>Class1.cs</code> make its way into the compiled project, you ask? Projects using the .NET Core SDK have an implicit <strong>opt-out</strong> strategy for project files. This means that, by default, everything in the project directory is included in the build. This <em>also</em> probably means, at least for me, less CI build failures because I added or renamed a file, but forgot to Save All in VS before committing (blasted <code>csproj</code> changes!).</p>\n<p>Also of note, the <a href=\"https://www.nuget.org/packages/NETStandard.Library/\" target=\"_blank\" rel=\"external\">NETStandard.Library</a> NuGet package is implicitly included. This package can roughly be considered the alternative to the <code>dll</code>s that make up the .NET Framework SDK install.</p>\n<h2 id=\"Building-the-Starter-Class-Library\"><a href=\"#Building-the-Starter-Class-Library\" class=\"headerlink\" title=\"Building the Starter Class Library\"></a>Building the Starter Class Library</h2><p>Building our newly generated project is as straightforward as running:</p>\n<figure class=\"highlight powershell\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div></pre></td><td class=\"code\"><pre><div class=\"line\">dotnet build</div></pre></td></tr></table></figure>\n<p>This builds our project in the defaut configuration (<code>Debug</code>), and you should have a <code>.dll</code> in <code>bin/Debug/netstandard1.4/</code>.</p>\n<h2 id=\"NuGet-Project-Properties\"><a href=\"#NuGet-Project-Properties\" class=\"headerlink\" title=\"NuGet Project Properties\"></a>NuGet Project Properties</h2><p>Previously, NuGet configuration was done with a separate <code>.nuspec</code> file which allowed setting package name, owner, version, and the like. With the recent releases of .NET Core SDK, that is consolidated as well into the project <code>.csproj</code>.</p>\n<p>Edit your <code>csproj</code> to read as follows (replacing the <code>{}</code> blocks with your own info):</p>\n<figure class=\"highlight xml\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">Project</span> <span class=\"attr\">Sdk</span>=<span class=\"string\">\"Microsoft.NET.Sdk\"</span>&gt;</span></div><div class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">PropertyGroup</span>&gt;</span></div><div class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">TargetFramework</span>&gt;</span>netstandard1.4<span class=\"tag\">&lt;/<span class=\"name\">TargetFramework</span>&gt;</span></div><div class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">Version</span>&gt;</span>0.0.1<span class=\"tag\">&lt;/<span class=\"name\">Version</span>&gt;</span></div><div class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">AssemblyName</span>&gt;</span>&#123;YourGitHubHandle&#125;.MyFancyPackage<span class=\"tag\">&lt;/<span class=\"name\">AssemblyName</span>&gt;</span></div><div class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">PackageId</span>&gt;</span>&#123;YourGitHubHandle&#125;.MyFancyPackage<span class=\"tag\">&lt;/<span class=\"name\">PackageId</span>&gt;</span></div><div class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">Description</span>&gt;</span>Sample package for .NET Core NuGets<span class=\"tag\">&lt;/<span class=\"name\">Description</span>&gt;</span></div><div class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">Authors</span>&gt;</span>&#123;yourName&#125;<span class=\"tag\">&lt;/<span class=\"name\">Authors</span>&gt;</span></div><div class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">PackageProjectUrl</span>&gt;</span>&#123;yourGithubRepoUrl&#125;<span class=\"tag\">&lt;/<span class=\"name\">PackageProjectUrl</span>&gt;</span></div><div class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">PackageTags</span>&gt;</span>sample dotnetcore nuget dotnetstandard<span class=\"tag\">&lt;/<span class=\"name\">PackageTags</span>&gt;</span></div><div class=\"line\">  <span class=\"tag\">&lt;/<span class=\"name\">PropertyGroup</span>&gt;</span></div><div class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">Project</span>&gt;</span></div></pre></td></tr></table></figure>\n<p>These properties in the <code>csproj</code> set the metadata which will be associated with your packagage when it is published to nuget.org. I suggest using your GitHub handle so that you don’t have to worry about package collision.</p>\n<h2 id=\"Creating-the-NuGet-Package\"><a href=\"#Creating-the-NuGet-Package\" class=\"headerlink\" title=\"Creating the NuGet Package\"></a>Creating the NuGet Package</h2><p>Before the .NET Core SDK, the <code>nuget</code> command line tool was used for both creating and publishing packages. Because NuGet is becoming more integrated with the .NET Core workflow, we’ll use the <code>dotnet</code> cli tool to build and bundle our package.</p>\n<p>Run the following in the project root:</p>\n<figure class=\"highlight powershell\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div></pre></td><td class=\"code\"><pre><div class=\"line\">dotnet pack -c Release</div></pre></td></tr></table></figure>\n<p>Notice that it created a package using the <code>AssemblyName</code> and version information you supplied in the <code>csproj</code>. The <code>-c</code> or <code>--configuration</code> flag sets your build configuration. This also prescribes the output folder (<code>bin/Release</code> in this case).</p>\n<h2 id=\"Publishing-Your-Package\"><a href=\"#Publishing-Your-Package\" class=\"headerlink\" title=\"Publishing Your Package\"></a>Publishing Your Package</h2><p>Remember creating that nuget.org account? Well take a look at your <a href=\"https://www.nuget.org/account\" target=\"_blank\" rel=\"external\">account page</a>. At the bottom of the page, you’ll see an “API Key” section. This API key is used to identify you as a package publisher and is required to create and manage your packages.</p>\n<p>Let’s try publishing your package now (substituing your own handle and API key):</p>\n<figure class=\"highlight powershell\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div></pre></td><td class=\"code\"><pre><div class=\"line\">nuget push bin/Release/&lt;YOUR_HANDLE&gt;.MyFancyPackage.<span class=\"number\">0.0</span>.<span class=\"number\">1</span>.nupkg &lt;API_KEY&gt; -Source https://www.nuget.org/api/v2/package</div></pre></td></tr></table></figure>\n<p>You should get a success message, and if you navigate back to your nuget.org account page and click “Manage My Packages”, you’ll see your new public package! Congratulations!</p>\n<p>Right after you publish your package, you’ll see a message that says “This package has not been indexed yet.” This means that your package won’t show up in search or be available to install just yet. For me, this only took about five minutes, but may be quicker or slower. Once this disappears though, you should be able to pull in your new package to any project you like!</p>\n<h1 id=\"Testing-Your-New-Package\"><a href=\"#Testing-Your-New-Package\" class=\"headerlink\" title=\"Testing Your New Package\"></a>Testing Your New Package</h1><p>Sure, we’ve put up some bytes on nuget.org, but do they work? We can build a small consuming app to try it out.</p>\n<h2 id=\"Modifying-the-Library\"><a href=\"#Modifying-the-Library\" class=\"headerlink\" title=\"Modifying the Library\"></a>Modifying the Library</h2><p>Let’s make the package a little more interesting so we can prove that we’re using the new package.</p>\n<p>Modify <code>Class1.cs</code> to read as follows:</p>\n<figure class=\"highlight cs\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"keyword\">namespace</span> <span class=\"title\">MyFancyPackage</span></div><div class=\"line\">&#123;</div><div class=\"line\">    <span class=\"keyword\">public</span> <span class=\"keyword\">static</span> <span class=\"keyword\">class</span> <span class=\"title\">Class1</span></div><div class=\"line\">    &#123;</div><div class=\"line\">        <span class=\"keyword\">public</span> <span class=\"keyword\">static</span> <span class=\"keyword\">readonly</span> <span class=\"keyword\">string</span> Message = <span class=\"string\">\"Hello world, from nupkg!\"</span>;</div><div class=\"line\">    &#125;</div><div class=\"line\">&#125;</div></pre></td></tr></table></figure>\n<p>Now we’ll build and publish it again to reflect our changes:</p>\n<figure class=\"highlight powershell\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div></pre></td><td class=\"code\"><pre><div class=\"line\">dotnet pack -c Release</div><div class=\"line\">nuget push bin/Release/&lt;YOUR_HANDLE&gt;.MyFancyPackage.<span class=\"number\">0.0</span>.<span class=\"number\">1</span>.nupkg &lt;API_KEY&gt; -Source https://www.nuget.org/api/v2/package</div></pre></td></tr></table></figure>\n<p>Uh oh, looks like that failed. That’s because we already published a 0.0.1 version of our package and nuget.org does not allow modifying or deleting packages once they’re published. You wouldn’t want a dependency to break from under you, <a href=\"http://www.haneycodes.net/npm-left-pad-have-we-forgotten-how-to-program/\" target=\"_blank\" rel=\"external\">would you</a>?</p>\n<p>We’ll need to bump our version back in the <code>csproj</code>:</p>\n<figure class=\"highlight xml\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div></pre></td><td class=\"code\"><pre><div class=\"line\">...</div><div class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">Version</span>&gt;</span>0.0.2<span class=\"tag\">&lt;/<span class=\"name\">Version</span>&gt;</span></div><div class=\"line\">...</div></pre></td></tr></table></figure>\n<p>And try again:</p>\n<figure class=\"highlight powershell\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div></pre></td><td class=\"code\"><pre><div class=\"line\">dotnet pack -c Release</div><div class=\"line\">nuget push bin/Release/&lt;YOUR_HANDLE&gt;.MyFancyPackage.<span class=\"number\">0.0</span>.<span class=\"number\">1</span>.nupkg &lt;API_KEY&gt; -Source https://www.nuget.org/api/v2/package</div></pre></td></tr></table></figure>\n<p>All better! While that’s indexing, let’s get our testing project up and running.</p>\n<h2 id=\"Test-Project\"><a href=\"#Test-Project\" class=\"headerlink\" title=\"Test Project\"></a>Test Project</h2><p>Since our test project is going to have a <code>csproj</code> of its own, we’ll want it in a different directory. Let’s pop out and create it:</p>\n<figure class=\"highlight powershell\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div></pre></td><td class=\"code\"><pre><div class=\"line\">cd ..</div><div class=\"line\">mkdir MyConsumingApp</div><div class=\"line\">cd MyConsumingApp</div><div class=\"line\">dotnet new</div></pre></td></tr></table></figure>\n<p>This time, we used the default project template which is a console app. Let’s give it a trial run:</p>\n<figure class=\"highlight powershell\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div></pre></td><td class=\"code\"><pre><div class=\"line\">dotnet restore</div><div class=\"line\">dotnet run</div><div class=\"line\">-&gt; Hello world!</div></pre></td></tr></table></figure>\n<p>Nice! By now, our package should be ready, so let’s pop open <code>MyConsumingApp.csproj</code> and add a reference to the package:</p>\n<figure class=\"highlight xml\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">Project</span> <span class=\"attr\">Sdk</span>=<span class=\"string\">\"Microsoft.NET.Sdk\"</span>&gt;</span></div><div class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">PropertyGroup</span>&gt;</span></div><div class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">OutputType</span>&gt;</span>Exe<span class=\"tag\">&lt;/<span class=\"name\">OutputType</span>&gt;</span></div><div class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">TargetFramework</span>&gt;</span>netcoreapp1.0<span class=\"tag\">&lt;/<span class=\"name\">TargetFramework</span>&gt;</span></div><div class=\"line\">  <span class=\"tag\">&lt;/<span class=\"name\">PropertyGroup</span>&gt;</span></div><div class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">ItemGroup</span>&gt;</span></div><div class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">PackageReference</span> <span class=\"attr\">Include</span>=<span class=\"string\">\"&#123;YourGitHubHandle&#125;.MyFancyPackage\"</span> <span class=\"attr\">Version</span>=<span class=\"string\">\"0.0.2\"</span> /&gt;</span></div><div class=\"line\">  <span class=\"tag\">&lt;/<span class=\"name\">ItemGroup</span>&gt;</span></div><div class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">Project</span>&gt;</span></div></pre></td></tr></table></figure>\n<p>We’ve added something new: a <code>PackageReference</code>. These are the types of things you would have seen in traditional <code>packages.config</code> files or even in the more recent <code>project.json</code>. Once you add a project reference and run <code>dotnet restore</code>, you’ll be able to use the third party code you depend on. Let’s do that now:</p>\n<figure class=\"highlight powershell\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div></pre></td><td class=\"code\"><pre><div class=\"line\">dotnet restore</div></pre></td></tr></table></figure>\n<p>Everything should be in place. Now we can start using our package! Change <code>Program.cs</code> to look like this:</p>\n<figure class=\"highlight cs\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"keyword\">using</span> System;</div><div class=\"line\"><span class=\"keyword\">using</span> &#123;YourGitHubHandle&#125;.MyFancyPackage;</div><div class=\"line\"></div><div class=\"line\"><span class=\"keyword\">namespace</span> <span class=\"title\">ConsoleApp</span></div><div class=\"line\">&#123;</div><div class=\"line\">    <span class=\"keyword\">class</span> <span class=\"title\">Program</span></div><div class=\"line\">    &#123;</div><div class=\"line\">        <span class=\"function\"><span class=\"keyword\">static</span> <span class=\"keyword\">void</span> <span class=\"title\">Main</span>(<span class=\"params\"><span class=\"keyword\">string</span>[] args</span>)</span></div><div class=\"line\">        &#123;</div><div class=\"line\">            Console.WriteLine(Class1.Message);</div><div class=\"line\">        &#125;</div><div class=\"line\">    &#125;</div><div class=\"line\">&#125;</div></pre></td></tr></table></figure>\n<p>Moment of truth! Let’s run it.</p>\n<figure class=\"highlight powershell\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div></pre></td><td class=\"code\"><pre><div class=\"line\">dotnet run</div><div class=\"line\">-&gt; Hello world, from nupkg!</div></pre></td></tr></table></figure>\n<p>Well done! You’re a published (NuGet) author!</p>\n<p>If you have any questions about these steps, hit me up at <a href=\"@ryanastelly\">https://twitter.com/ryanastelly</a> and I’ll do my best to help out. Cheers!</p>\n","excerpt":"","more":"<h5 id=\"NOTE-This-post-is-only-getting-written-because-I-couldn’t-find-a-reliable-and-up-to-date-guide-for-creating-public-NuGet-packages-for-the-current-state-of-NET-Core-tooling-I’ll-do-my-best-to-either-update-this-or-delete-it-when-it-becomes-irrelevant-in-order-to-prevent-the-confusion-that-made-this-a-little-difficult-for-me\"><a href=\"#NOTE-This-post-is-only-getting-written-because-I-couldn’t-find-a-reliable-and-up-to-date-guide-for-creating-public-NuGet-packages-for-the-current-state-of-NET-Core-tooling-I’ll-do-my-best-to-either-update-this-or-delete-it-when-it-becomes-irrelevant-in-order-to-prevent-the-confusion-that-made-this-a-little-difficult-for-me\" class=\"headerlink\" title=\"NOTE: This post is only getting written because I couldn’t find a reliable and up to date guide for creating public NuGet packages for the current state of .NET Core tooling. I’ll do my best to either update this or delete it when it becomes irrelevant in order to prevent the confusion that made this a little difficult for me.\"></a><em>NOTE: This post is only getting written because I couldn’t find a reliable and up to date guide for creating public NuGet packages for the current state of .NET Core tooling. I’ll do my best to either update this or delete it when it becomes irrelevant in order to prevent the confusion that made this a little difficult for me.</em></h5><p>So you’ve got some code you think would be helpful to your community. Or maybe you just want to save yourself the hassle of managing bits of code that you frequently use in your projects.</p>\n<p>Thankfully, you have available to you the same mechanism that all your favorite dependencies use to distribute and retrieve packages: <strong>NuGet</strong>.</p>\n<h2 id=\"About-NuGet\"><a href=\"#About-NuGet\" class=\"headerlink\" title=\"About NuGet\"></a>About NuGet</h2><p>NuGet is a package manager which is used for various things such as <a href=\"https://chocolatey.org/\">Windows software</a> and <a href=\"https://octopus.com/\">deployment packaging</a>, but is primarily used by .NET developers for packaging and managing code libraries.</p>\n<p>Developers have the ability to turn their software (typically class libraries) into NuGet packages (<code>*.nupkg</code>), publish those packages to a NuGet repository (<a href=\"https://www.nuget.org/\">https://www.nuget.org/</a> or their own private repositories), and have other developers reference the packages in their own projects.</p>\n<p>With the recent changes to the .NET tooling and build infrastructure, there’s been a lack of clarity about what this process is going to look like going forward. Since I recently decided to publish a package, I’ll share the steps I took to create a package on nuget.org with the latest tools (specifically, <code>1.0.0-rc4-004706</code> and later).</p>\n<h2 id=\"What-you’ll-need\"><a href=\"#What-you’ll-need\" class=\"headerlink\" title=\"What you’ll need\"></a>What you’ll need</h2><ul>\n<li><a href=\"https://www.nuget.org/users/account/LogOn\">A nuget.org account</a></li>\n<li><a href=\"https://docs.microsoft.com/en-us/nuget/guides/install-nuget#nuget-cli\">The NuGet Command Line Tools</a></li>\n<li><a href=\"https://github.com/dotnet/cli/#installers-and-binaries\">.NET Core SDK &amp; CLI tools</a></li>\n</ul>\n<p>It’s pretty important following along that you have this exact version of the tools. These are changing <em>very</em> quickly and this guide may not be entirely correct or relevant for other versions.</p>\n<p>If your version is lower than the following, try reinstalling the dotnet tools from the site above.</p>\n<figure class=\"highlight powershell\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div></pre></td><td class=\"code\"><pre><div class=\"line\">dotnet --version</div><div class=\"line\"><span class=\"number\">1.0</span>.<span class=\"number\">0</span>-rc4-<span class=\"number\">004706</span></div></pre></td></tr></table></figure>\n<h2 id=\"Creating-a-Class-Library\"><a href=\"#Creating-a-Class-Library\" class=\"headerlink\" title=\"Creating a Class Library\"></a>Creating a Class Library</h2><p>You can create NuGet packages out of your existing class libraries, but for this guide, I’ll be starting from scratch with a new project, using the <code>dotnet</code> cli:</p>\n<figure class=\"highlight powershell\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div></pre></td><td class=\"code\"><pre><div class=\"line\">mkdir MyFancyPackage</div><div class=\"line\">cd MyFancyPackage</div><div class=\"line\">dotnet new -t Lib <span class=\"comment\"># creates a new .NET project using the Class Library template</span></div></pre></td></tr></table></figure>\n<p>You should now have a <code>Class1.cs</code> and <code>MyFancyPackage.csproj</code>. That’s right, a <code>csproj</code>. You may have heard of or fiddled with .NET Core in the past and been exposed to files such as <code>project.json</code> and <code>*.xproj</code>, but the path forward for .NET is <code>csproj</code> files and MSBuild.</p>\n<p>Don’t fret though! This isn’t the <code>csproj</code> you’re used to/annoyed with/cripplingly terrified of. Here’s what a basic class library looks like:</p>\n<figure class=\"highlight xml\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">Project</span> <span class=\"attr\">Sdk</span>=<span class=\"string\">\"Microsoft.NET.Sdk\"</span>&gt;</span></div><div class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">PropertyGroup</span>&gt;</span></div><div class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">TargetFramework</span>&gt;</span>netstandard1.4<span class=\"tag\">&lt;/<span class=\"name\">TargetFramework</span>&gt;</span></div><div class=\"line\">  <span class=\"tag\">&lt;/<span class=\"name\">PropertyGroup</span>&gt;</span></div><div class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">Project</span>&gt;</span></div></pre></td></tr></table></figure>\n<p>Some things to note:</p>\n<ul>\n<li>5 lines instead of the 47 lines from a VS 2015 Class Library template</li>\n<li>No build tools versions</li>\n<li>No build targets paths</li>\n<li>No build configurations</li>\n<li>No file includes</li>\n<li>No external references</li>\n</ul>\n<p>The .NET Core tooling team has brought together familiar parts from the <code>csproj</code> xml you know and love, melded with the readability and convention-over-configuration tendencies of the popular <code>project.json</code>.</p>\n<p>How does <code>Class1.cs</code> make its way into the compiled project, you ask? Projects using the .NET Core SDK have an implicit <strong>opt-out</strong> strategy for project files. This means that, by default, everything in the project directory is included in the build. This <em>also</em> probably means, at least for me, less CI build failures because I added or renamed a file, but forgot to Save All in VS before committing (blasted <code>csproj</code> changes!).</p>\n<p>Also of note, the <a href=\"https://www.nuget.org/packages/NETStandard.Library/\">NETStandard.Library</a> NuGet package is implicitly included. This package can roughly be considered the alternative to the <code>dll</code>s that make up the .NET Framework SDK install.</p>\n<h2 id=\"Building-the-Starter-Class-Library\"><a href=\"#Building-the-Starter-Class-Library\" class=\"headerlink\" title=\"Building the Starter Class Library\"></a>Building the Starter Class Library</h2><p>Building our newly generated project is as straightforward as running:</p>\n<figure class=\"highlight powershell\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div></pre></td><td class=\"code\"><pre><div class=\"line\">dotnet build</div></pre></td></tr></table></figure>\n<p>This builds our project in the defaut configuration (<code>Debug</code>), and you should have a <code>.dll</code> in <code>bin/Debug/netstandard1.4/</code>.</p>\n<h2 id=\"NuGet-Project-Properties\"><a href=\"#NuGet-Project-Properties\" class=\"headerlink\" title=\"NuGet Project Properties\"></a>NuGet Project Properties</h2><p>Previously, NuGet configuration was done with a separate <code>.nuspec</code> file which allowed setting package name, owner, version, and the like. With the recent releases of .NET Core SDK, that is consolidated as well into the project <code>.csproj</code>.</p>\n<p>Edit your <code>csproj</code> to read as follows (replacing the <code>{}</code> blocks with your own info):</p>\n<figure class=\"highlight xml\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">Project</span> <span class=\"attr\">Sdk</span>=<span class=\"string\">\"Microsoft.NET.Sdk\"</span>&gt;</span></div><div class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">PropertyGroup</span>&gt;</span></div><div class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">TargetFramework</span>&gt;</span>netstandard1.4<span class=\"tag\">&lt;/<span class=\"name\">TargetFramework</span>&gt;</span></div><div class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">Version</span>&gt;</span>0.0.1<span class=\"tag\">&lt;/<span class=\"name\">Version</span>&gt;</span></div><div class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">AssemblyName</span>&gt;</span>&#123;YourGitHubHandle&#125;.MyFancyPackage<span class=\"tag\">&lt;/<span class=\"name\">AssemblyName</span>&gt;</span></div><div class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">PackageId</span>&gt;</span>&#123;YourGitHubHandle&#125;.MyFancyPackage<span class=\"tag\">&lt;/<span class=\"name\">PackageId</span>&gt;</span></div><div class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">Description</span>&gt;</span>Sample package for .NET Core NuGets<span class=\"tag\">&lt;/<span class=\"name\">Description</span>&gt;</span></div><div class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">Authors</span>&gt;</span>&#123;yourName&#125;<span class=\"tag\">&lt;/<span class=\"name\">Authors</span>&gt;</span></div><div class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">PackageProjectUrl</span>&gt;</span>&#123;yourGithubRepoUrl&#125;<span class=\"tag\">&lt;/<span class=\"name\">PackageProjectUrl</span>&gt;</span></div><div class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">PackageTags</span>&gt;</span>sample dotnetcore nuget dotnetstandard<span class=\"tag\">&lt;/<span class=\"name\">PackageTags</span>&gt;</span></div><div class=\"line\">  <span class=\"tag\">&lt;/<span class=\"name\">PropertyGroup</span>&gt;</span></div><div class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">Project</span>&gt;</span></div></pre></td></tr></table></figure>\n<p>These properties in the <code>csproj</code> set the metadata which will be associated with your packagage when it is published to nuget.org. I suggest using your GitHub handle so that you don’t have to worry about package collision.</p>\n<h2 id=\"Creating-the-NuGet-Package\"><a href=\"#Creating-the-NuGet-Package\" class=\"headerlink\" title=\"Creating the NuGet Package\"></a>Creating the NuGet Package</h2><p>Before the .NET Core SDK, the <code>nuget</code> command line tool was used for both creating and publishing packages. Because NuGet is becoming more integrated with the .NET Core workflow, we’ll use the <code>dotnet</code> cli tool to build and bundle our package.</p>\n<p>Run the following in the project root:</p>\n<figure class=\"highlight powershell\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div></pre></td><td class=\"code\"><pre><div class=\"line\">dotnet pack -c Release</div></pre></td></tr></table></figure>\n<p>Notice that it created a package using the <code>AssemblyName</code> and version information you supplied in the <code>csproj</code>. The <code>-c</code> or <code>--configuration</code> flag sets your build configuration. This also prescribes the output folder (<code>bin/Release</code> in this case).</p>\n<h2 id=\"Publishing-Your-Package\"><a href=\"#Publishing-Your-Package\" class=\"headerlink\" title=\"Publishing Your Package\"></a>Publishing Your Package</h2><p>Remember creating that nuget.org account? Well take a look at your <a href=\"https://www.nuget.org/account\">account page</a>. At the bottom of the page, you’ll see an “API Key” section. This API key is used to identify you as a package publisher and is required to create and manage your packages.</p>\n<p>Let’s try publishing your package now (substituing your own handle and API key):</p>\n<figure class=\"highlight powershell\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div></pre></td><td class=\"code\"><pre><div class=\"line\">nuget push bin/Release/&lt;YOUR_HANDLE&gt;.MyFancyPackage.<span class=\"number\">0.0</span>.<span class=\"number\">1</span>.nupkg &lt;API_KEY&gt; -Source https://www.nuget.org/api/v2/package</div></pre></td></tr></table></figure>\n<p>You should get a success message, and if you navigate back to your nuget.org account page and click “Manage My Packages”, you’ll see your new public package! Congratulations!</p>\n<p>Right after you publish your package, you’ll see a message that says “This package has not been indexed yet.” This means that your package won’t show up in search or be available to install just yet. For me, this only took about five minutes, but may be quicker or slower. Once this disappears though, you should be able to pull in your new package to any project you like!</p>\n<h1 id=\"Testing-Your-New-Package\"><a href=\"#Testing-Your-New-Package\" class=\"headerlink\" title=\"Testing Your New Package\"></a>Testing Your New Package</h1><p>Sure, we’ve put up some bytes on nuget.org, but do they work? We can build a small consuming app to try it out.</p>\n<h2 id=\"Modifying-the-Library\"><a href=\"#Modifying-the-Library\" class=\"headerlink\" title=\"Modifying the Library\"></a>Modifying the Library</h2><p>Let’s make the package a little more interesting so we can prove that we’re using the new package.</p>\n<p>Modify <code>Class1.cs</code> to read as follows:</p>\n<figure class=\"highlight cs\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"keyword\">namespace</span> <span class=\"title\">MyFancyPackage</span></div><div class=\"line\">&#123;</div><div class=\"line\">    <span class=\"keyword\">public</span> <span class=\"keyword\">static</span> <span class=\"keyword\">class</span> <span class=\"title\">Class1</span></div><div class=\"line\">    &#123;</div><div class=\"line\">        <span class=\"keyword\">public</span> <span class=\"keyword\">static</span> <span class=\"keyword\">readonly</span> <span class=\"keyword\">string</span> Message = <span class=\"string\">\"Hello world, from nupkg!\"</span>;</div><div class=\"line\">    &#125;</div><div class=\"line\">&#125;</div></pre></td></tr></table></figure>\n<p>Now we’ll build and publish it again to reflect our changes:</p>\n<figure class=\"highlight powershell\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div></pre></td><td class=\"code\"><pre><div class=\"line\">dotnet pack -c Release</div><div class=\"line\">nuget push bin/Release/&lt;YOUR_HANDLE&gt;.MyFancyPackage.<span class=\"number\">0.0</span>.<span class=\"number\">1</span>.nupkg &lt;API_KEY&gt; -Source https://www.nuget.org/api/v2/package</div></pre></td></tr></table></figure>\n<p>Uh oh, looks like that failed. That’s because we already published a 0.0.1 version of our package and nuget.org does not allow modifying or deleting packages once they’re published. You wouldn’t want a dependency to break from under you, <a href=\"http://www.haneycodes.net/npm-left-pad-have-we-forgotten-how-to-program/\">would you</a>?</p>\n<p>We’ll need to bump our version back in the <code>csproj</code>:</p>\n<figure class=\"highlight xml\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div></pre></td><td class=\"code\"><pre><div class=\"line\">...</div><div class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">Version</span>&gt;</span>0.0.2<span class=\"tag\">&lt;/<span class=\"name\">Version</span>&gt;</span></div><div class=\"line\">...</div></pre></td></tr></table></figure>\n<p>And try again:</p>\n<figure class=\"highlight powershell\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div></pre></td><td class=\"code\"><pre><div class=\"line\">dotnet pack -c Release</div><div class=\"line\">nuget push bin/Release/&lt;YOUR_HANDLE&gt;.MyFancyPackage.<span class=\"number\">0.0</span>.<span class=\"number\">1</span>.nupkg &lt;API_KEY&gt; -Source https://www.nuget.org/api/v2/package</div></pre></td></tr></table></figure>\n<p>All better! While that’s indexing, let’s get our testing project up and running.</p>\n<h2 id=\"Test-Project\"><a href=\"#Test-Project\" class=\"headerlink\" title=\"Test Project\"></a>Test Project</h2><p>Since our test project is going to have a <code>csproj</code> of its own, we’ll want it in a different directory. Let’s pop out and create it:</p>\n<figure class=\"highlight powershell\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div></pre></td><td class=\"code\"><pre><div class=\"line\">cd ..</div><div class=\"line\">mkdir MyConsumingApp</div><div class=\"line\">cd MyConsumingApp</div><div class=\"line\">dotnet new</div></pre></td></tr></table></figure>\n<p>This time, we used the default project template which is a console app. Let’s give it a trial run:</p>\n<figure class=\"highlight powershell\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div></pre></td><td class=\"code\"><pre><div class=\"line\">dotnet restore</div><div class=\"line\">dotnet run</div><div class=\"line\">-&gt; Hello world!</div></pre></td></tr></table></figure>\n<p>Nice! By now, our package should be ready, so let’s pop open <code>MyConsumingApp.csproj</code> and add a reference to the package:</p>\n<figure class=\"highlight xml\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">Project</span> <span class=\"attr\">Sdk</span>=<span class=\"string\">\"Microsoft.NET.Sdk\"</span>&gt;</span></div><div class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">PropertyGroup</span>&gt;</span></div><div class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">OutputType</span>&gt;</span>Exe<span class=\"tag\">&lt;/<span class=\"name\">OutputType</span>&gt;</span></div><div class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">TargetFramework</span>&gt;</span>netcoreapp1.0<span class=\"tag\">&lt;/<span class=\"name\">TargetFramework</span>&gt;</span></div><div class=\"line\">  <span class=\"tag\">&lt;/<span class=\"name\">PropertyGroup</span>&gt;</span></div><div class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">ItemGroup</span>&gt;</span></div><div class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">PackageReference</span> <span class=\"attr\">Include</span>=<span class=\"string\">\"&#123;YourGitHubHandle&#125;.MyFancyPackage\"</span> <span class=\"attr\">Version</span>=<span class=\"string\">\"0.0.2\"</span> /&gt;</span></div><div class=\"line\">  <span class=\"tag\">&lt;/<span class=\"name\">ItemGroup</span>&gt;</span></div><div class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">Project</span>&gt;</span></div></pre></td></tr></table></figure>\n<p>We’ve added something new: a <code>PackageReference</code>. These are the types of things you would have seen in traditional <code>packages.config</code> files or even in the more recent <code>project.json</code>. Once you add a project reference and run <code>dotnet restore</code>, you’ll be able to use the third party code you depend on. Let’s do that now:</p>\n<figure class=\"highlight powershell\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div></pre></td><td class=\"code\"><pre><div class=\"line\">dotnet restore</div></pre></td></tr></table></figure>\n<p>Everything should be in place. Now we can start using our package! Change <code>Program.cs</code> to look like this:</p>\n<figure class=\"highlight cs\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"keyword\">using</span> System;</div><div class=\"line\"><span class=\"keyword\">using</span> &#123;YourGitHubHandle&#125;.MyFancyPackage;</div><div class=\"line\"></div><div class=\"line\"><span class=\"keyword\">namespace</span> <span class=\"title\">ConsoleApp</span></div><div class=\"line\">&#123;</div><div class=\"line\">    <span class=\"keyword\">class</span> <span class=\"title\">Program</span></div><div class=\"line\">    &#123;</div><div class=\"line\">        <span class=\"function\"><span class=\"keyword\">static</span> <span class=\"keyword\">void</span> <span class=\"title\">Main</span>(<span class=\"params\"><span class=\"keyword\">string</span>[] args</span>)</div><div class=\"line\">        </span>&#123;</div><div class=\"line\">            Console.WriteLine(Class1.Message);</div><div class=\"line\">        &#125;</div><div class=\"line\">    &#125;</div><div class=\"line\">&#125;</div></pre></td></tr></table></figure>\n<p>Moment of truth! Let’s run it.</p>\n<figure class=\"highlight powershell\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div></pre></td><td class=\"code\"><pre><div class=\"line\">dotnet run</div><div class=\"line\">-&gt; Hello world, from nupkg!</div></pre></td></tr></table></figure>\n<p>Well done! You’re a published (NuGet) author!</p>\n<p>If you have any questions about these steps, hit me up at <a href=\"@ryanastelly\">https://twitter.com/ryanastelly</a> and I’ll do my best to help out. Cheers!</p>\n"}],"PostAsset":[],"PostCategory":[],"PostTag":[{"post_id":"ciyhz3fxo0001s8wb0lqg9eee","tag_id":"ciyhz3fxq0002s8wb2q0313s2","_id":"ciyhz3fxr0003s8wbm6p5uoqx"}],"Tag":[{"name":"csharp dotnet dotnetcore nuget","_id":"ciyhz3fxq0002s8wb2q0313s2"}]}}